<p>This template provides different responses depending on the "action" parameter.</p>


<form method="get">
    Action: <select name="action">
        <option value="html"    >Generate some html</option>
        <option value="image"   >Generate an image</option>
        <option value="download">Download an image</option>
        <option value="redirect">Redirect to another site</option>
        <option value="calc"    >Perform some calculations</option>
    </select>
        <input type="submit" value="go">
</form>


@import gws

@if params.get('action') == 'html'
    @return gws.ContentResponse(
        mime='text/html',
        content='<h1>Hello, world!</h1>',
    )
@end

@if params.get('action') == 'image'
    @return gws.ContentResponse(
        mime='image/jpeg',
        contentPath='/gws-app/gws/base/template/_demo/assets/kitty.jpg'
    )
@end

@if params.get('action') == 'download'
    @return gws.ContentResponse(
        mime='image/jpeg',
        contentPath='/gws-app/gws/base/template/_demo/assets/kitty.jpg',
        asAttachment=True
    )
@end

@if params.get('action') == 'redirect'
    @return gws.RedirectResponse(
        location='https://gbd-websuite.de/',
    )
@end

@if params.get('action') == 'calc'
    @code
        length = len(ARGS.project.title)
        first = ARGS.project.title[0]
        last = ARGS.project.title[-1]
        return gws.ContentResponse(
            mime='text/html',
            content=f'''
                <p>This output is generated by embedded python code.</p>
                <p>GWS version: {ARGS.app.version}</p>
                <p>This project title is "{ARGS.project.title}".</p>
                <p>It contains {length} letters.</p>
                <p>The first letter is "{first}".</p>
                <p>The last letter is  "{last}".</p>
            '''
        )
    @end
@end
